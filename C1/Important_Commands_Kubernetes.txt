### Important Commands ###

# Minikube CLI is used to start up/deleting the Cluster
# Kubectl CLI is used to configure minikube cluster

To start the minikube cluster.
minikube start --driver=docker --base-image=kicbase/stable:v0.0.20 --kubernetes-version v1.23.0

kubectl 1.23 
https://s3.us-west-2.amazonaws.com/amazon-eks/1.23.13/2022-10-31/bin/windows/amd64/kubectl.exe
  

To get the status of nodes (It will tell that minikube node is ready
> kubectl get nodes
> Kubectl get all (All things that are running in cluster - POD,Services,Deployment,Replicaset)

> minikube status

To get the version of kubernetes . It will tell what is client veresion and server version of K8's
> kubectl version

## Basic Kubectl commands 

1. kubectl get nodes #It will show one node which is a minikube cluster 

2. Kubectl get pod

3. kubectl get services #It will show only one default service 

## Creating kubectl components - POD (But abstraction of pod is Deployment)

4. kubectl create deployment NAME --image=image [--dry-run] [options]

- POD will be created based on container image

### Creating NGINX Deployment and Mongo bb

> kubectl create deployment nginx-depl --image=nginx

> kubectl create deployment mongo-depl --image=mongo

5. kubectl get deployment #Get list of all deployments 

6. kubectl get pod #It will have POD which will have prefix of deployment name 

7. kubectl get replicaset
- Another layer in between Deployment and POD - Replica SET (It is automatically managed by kubernetes)It manages replicas of POD

8. kubectl edit deployment nginx-depl
- You will get auto genarated config file of deployment 
- Edit the file and save.

Older POD will get terminate , Replicaset will aslo get updated 

9. kubectl logs [podname] 

10. kubectl describe pod podname

11. kubectl exec -it podname bin/bash ## You will get container access of pod

12. Kubectl delete deployment deploymentname

### DEMO from Configuration File


#### Creating Deployment and Service 

13. kubectl apply -f filename #Take the configuration from file 

Example - kubectl apply -f config-file.yaml

Go till path where config file is available>kubectl apply -f nginx-deployment.yaml
Go till path where config file is available>kubectl apply -f nginx-service.yaml

### How can we validate that Service has Right Ports - Using Describe command
14. kubectl describe service nginx-service
- It consist of Endpoints of PODS where service will forward the request too.

### How to get the IP Address of PODS
15. kubectl get pod -o wide

### Get the STATUS Process which is auto generated by Kubernetes in YAML File 
16. kubectl get deployment nginx-deployment -o yaml > nginx_deployment_local_result.yaml

### Delete Everythin which is created by configuration file (deployment and service
17.A kubectl delete -f nginx-deployment.yaml
17.B kubectl delete -f nginx-service.yaml

############### DEMO PROJECT COMMANDS #########################

- Will create MongoDB POD with Internal Service 
- Will create MongoExpress POD with External Service 

Will write all above things in Deployment.yaml of MongoExpress
- DB URL will be saved in ConfigMap
- Username and Database password will be in secret 

### STEPS 

- Create Secret.yaml
- Values of creds should be base64 encoded 

### Before create Deployment we will have create Secret.yaml because that will be refered in Deployment.yaml

18.A Path_till_File>Kubectl apply -f mongo-secret.yaml 

19.kubectl get secret

### Now we will refer above secret in deployment.yaml file 

18.B Path_till_File>Kubectl apply -f mongo.yaml 

#### If you edit something in the file . And again run the below comman. It will automatically detect the changes
> Path_till_File>Kubectl apply -f mongo.yaml

- Create ConfigMap.yaml 
- Value in Data will be actually the service name of mongo db

20.A Path_till_File>Kubectl apply -f mongo-configmap.yaml 

20.B Path_till_File>Kubectl apply -f mongo-express.yaml 

21. Assigning External IP for External Service

>minikube service mongo-express-service


























 













